<script src="/wasm_exec.js"></script>
<script>
    (async() => {
        let start = Date.now();
        console.log("loading go env and wasm...");
        const go = new Go();
        let wasmModule = await WebAssembly.instantiateStreaming(fetch("/artifacts/prover.wasm"), go.importObject);
        go.run(wasmModule.instance);

        console.log("reading artifacts...");

        let resWitness = await fetch("/artifacts/zkcensus.witness");
        let witnessBuff = await resWitness.arrayBuffer();
        let witness = new Uint8Array(witnessBuff);

        console.log("generating proof...")
        console.log(generateProof(witness));
        let end = Date.now();
        let elapsed = end - start;
        console.log("Finished!", `${elapsed / 1000}s`);
    })();
</script>