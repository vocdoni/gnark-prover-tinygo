import*as wasi from"./wasi_defs.js";export class File{get size(){return BigInt(this.data.byteLength)}stat(){return new wasi.Filestat(wasi.FILETYPE_REGULAR_FILE,this.size)}truncate(){this.data=new Uint8Array([])}constructor(data){this.data=new Uint8Array(data)}}export class Directory{stat(){return new wasi.Filestat(wasi.FILETYPE_DIRECTORY,0n)}get_entry_for_path(path){let entry=this;for(let component of path.split("/")){if(component=="")break;if(this.contents[component]!=undefined){entry=this.contents[component]}else{return null}}return entry}create_entry_for_path(path){let entry=this;let components=path.split("/").filter(component=>component!="/");for(let i=0;i<components.length;i++){let component=components[i];if(entry.contents[component]!=undefined){entry=entry.contents[component]}else{if(i==components.length-1){entry.contents[component]=new File(new ArrayBuffer(0))}else{entry.contents[component]=new Directory({})}entry=entry.contents[component]}}return entry}constructor(contents){this.contents=contents}}